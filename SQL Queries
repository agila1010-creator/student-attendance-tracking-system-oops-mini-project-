-- Create Database
CREATE DATABASE IF NOT EXISTS attendance_db;
USE attendance_db;

-- Table: students
CREATE TABLE IF NOT EXISTS students (
    rollno VARCHAR(10) PRIMARY KEY,
    name VARCHAR(50) NOT NULL,
    course VARCHAR(50) NOT NULL,
    email VARCHAR(100),
    phone VARCHAR(15)
);

-- Table: faculty
CREATE TABLE IF NOT EXISTS faculty (
    faculty_id VARCHAR(10) PRIMARY KEY,
    name VARCHAR(50) NOT NULL,
    department VARCHAR(50)
);

-- Table: courses
CREATE TABLE IF NOT EXISTS courses (
    course_code VARCHAR(10) PRIMARY KEY,
    course_name VARCHAR(100) NOT NULL,
    faculty_id VARCHAR(10),
    FOREIGN KEY (faculty_id) REFERENCES faculty(faculty_id)
);

-- Table: attendance
CREATE TABLE IF NOT EXISTS attendance (
    id INT AUTO_INCREMENT PRIMARY KEY,
    rollno VARCHAR(10),
    date DATE NOT NULL,
    status CHAR(1) CHECK (status IN ('P', 'A')), -- P = Present, A = Absent
    FOREIGN KEY (rollno) REFERENCES students(rollno),
    UNIQUE(rollno, date) -- Prevent duplicate entry for same student on same date
);
